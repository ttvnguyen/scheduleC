<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head.ejs') %>
<%- include('./partials/header.ejs') %>
<%- include('./partials/nav.ejs') %>
<body>
    <div class="container">
        <button onclick="window.print()" title="PRINT"><i class="fa fa-print" aria-hidden="true"></i></button>
        <% let sum = {}
            for (let i=0; i<transactions.length;i++){
                if(transactions[i].category in sum){
                    sum[transactions[i].category]+=transactions[i].amount
                }else{
                    sum[transactions[i].category]=transactions[i].amount
                }
            } %>
        <table>
            <tr>
                <th class="but-sol">Category</th>
                <th class="but-sol">Total</th>
            </tr>     
             <%for (cat in sum){%>
                <tr>
                    <th><%=cat%></th>
                    <th><%=sum[cat]%></th>
                </tr>
            <%} %>
            <tr>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <%let total = 0%>
                <%total = transactions.reduce((sum, obj) => { return sum + parseInt(obj.amount)},0) %>
                <th class="but-sol">Total Expenses</th>
                <th><%=total%></th>
            </tr>
        </table>
    </div>
    <%- include ('./partials/footer.ejs') %>
</body>
</html>